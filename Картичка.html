<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ĞšÑ€ĞµĞ¸Ñ€Ğ°Ñ˜ ĞºĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ° - AAC Card Creator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #667eea;
            --primary-gradient: linear-gradient(90deg, #4c51bf 0%, #667eea 100%);
            --bg-color: #1a202c;
            --card-bg: #2d3748;
            --text-main: #f7fafc;
            --text-muted: #a0aec0;
            --border-color: #4a5568;
            --input-bg: #1a202c;
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --radius-lg: 16px;
            --font-family: 'Outfit', sans-serif;
        }

        /* Light Theme */
        body.light-mode {
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-main: #1a202c;
            --text-muted: #4a5568;
            --border-color: #e2e8f0;
            --input-bg: #f7fafc;
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Header controls */
        .header-controls {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .control-btn {
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem 0.75rem;
            font-size: 1rem;
            font-weight: 700;
            font-family: inherit;
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-btn:hover {
            border-color: var(--primary-color);
            transform: scale(1.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
        }

        .app-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 3rem;
            max-width: 1000px;
            width: 100%;
            align-items: start;
        }

        @media (max-width: 800px) {
            .app-container { grid-template-columns: 1fr; }
        }

        .panel {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .panel-header h1 {
            font-size: 1.8rem;
            font-style: italic;
            color: #fff;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .panel-header p {
            color: var(--text-muted);
            margin-bottom: 2rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tab-btn {
            flex: 1;
            padding: 0.75rem 1rem;
            background: transparent;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            border-color: var(--primary-color);
            color: var(--text-main);
        }

        .tab-btn.active {
            background: var(--primary-gradient);
            border-color: transparent;
            color: white;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Form */
        .form-group { margin-bottom: 1.5rem; }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-main);
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            background: var(--input-bg);
            color: var(--text-main);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        small {
            display: block;
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Buttons */
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            width: 100%;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .btn-primary:hover { opacity: 0.9; }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-secondary {
            background-color: var(--border-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            margin-top: 2rem;
        }

        .btn-secondary:hover { opacity: 0.9; }

        .btn-stop {
            background: #e53e3e;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            width: 100%;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            margin-top: 0.5rem;
        }

        /* Emoji Grid */
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            max-height: 220px;
            overflow-y: auto;
            padding: 10px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1rem;
            min-height: 120px;
        }

        .emoji-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .emoji-item:hover {
            background: var(--card-bg);
            transform: scale(1.1);
        }

        .emoji-item.selected {
            background: rgba(102, 126, 234, 0.3);
            border-color: var(--primary-color);
        }

        .emoji-message {
            grid-column: 1 / -1;
            text-align: center;
            padding: 1.5rem;
            color: var(--text-muted);
        }

        /* Card Display */
        .display-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: transparent;
            box-shadow: none;
            padding: 0;
            border: none;
        }

        .aac-card {
            background: white;
            width: 400px;
            height: 400px;
            border: 8px solid #a8d4ff;
            border-radius: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: var(--shadow-lg);
            padding: 1.5rem;
            box-sizing: border-box;
            overflow: hidden;
        }

        @media (max-width: 500px) {
            .aac-card {
                width: 320px;
                height: 320px;
            }
        }

        .card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            gap: 0.5rem;
        }

        .symbol-display {
            font-size: 9rem;
            line-height: 1;
            flex-shrink: 0;
        }

        .image-display {
            width: 220px;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .image-display img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }

        .placeholder-icon {
            font-size: 6rem;
            opacity: 0.2;
        }

        .large-label {
            font-size: 3rem;
            font-weight: 800;
            color: #1a1a2e;
            line-height: 1.2;
            word-break: break-word;
            text-align: center;
            max-width: 100%;
            padding: 0 0.5rem;
        }

        /* Spinner */
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(102, 126, 234, 0.2);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .loading-info { text-align: center; }

        .timer {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 0.5rem;
        }

        /* Color controls */
        .color-controls {
            margin: 1rem 0;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .color-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .color-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-muted);
            min-width: 50px;
        }

        .color-picker {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .color-swatch {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .color-swatch:hover { transform: scale(1.15); }
        .color-swatch.active {
            border-color: white;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .sync-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-muted);
            cursor: pointer;
            margin-top: 0.25rem;
        }

        .sync-checkbox input {
            cursor: pointer;
        }

        .credit-watermark {
            position: fixed;
            bottom: 10px;
            right: 15px;
            font-size: 10px;
            color: rgba(102, 126, 234, 0.4);
            font-weight: 500;
            pointer-events: none;
        }

        body.light-mode .credit-watermark {
            color: rgba(102, 126, 234, 0.6);
        }
    </style>
</head>
<body>
    <main class="app-container">
        <!-- INPUT SECTION -->
        <section class="panel input-panel">
            <header class="panel-header">
                <div class="header-controls">
                    <button id="theme-toggle" class="control-btn" title="Toggle theme">ğŸŒ™</button>
                    <button id="lang-toggle" class="control-btn" title="Change language">EN</button>
                </div>
                <h1 data-i18n="title">ĞšÑ€ĞµĞ¸Ñ€Ğ°Ñ˜ ĞºĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ°</h1>
                <p data-i18n="subtitle">Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ˜ Ğ²Ğ¸Ğ·ÑƒĞµĞ»Ğ½Ğ¸ Ğ¿Ğ¾Ğ¼Ğ°Ğ³Ğ°Ğ»Ğ° Ğ·Ğ° ĞºĞ¾Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ˜Ğ°</p>
            </header>

            <!-- TABS -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="emoji" data-i18n="tab_emoji">Ğ•Ğ¼Ğ¾ÑŸĞ¸ ĞŸÑ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ</button>
                <button class="tab-btn" data-tab="ai" data-i18n="tab_ai">AI Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€</button>
            </div>

            <!-- TAB: EMOJI -->
            <div id="tab-emoji" class="tab-content active">
                <div class="form-group">
                    <label data-i18n="search_symbol">Ğ‘Ğ°Ñ€Ğ°Ñ˜ Ğ¡Ğ¸Ğ¼Ğ±Ğ¾Ğ»</label>
                    <input type="text" id="emoji-search" data-i18n-placeholder="search_placeholder" placeholder="ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ Ğ·Ğ° Ğ¿Ñ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ (Ğ¿Ñ€. 'happy', 'dog')..." autocomplete="off">
                </div>

                <div id="emoji-grid" class="emoji-grid">
                    <p class="emoji-message" data-i18n="search_hint">ĞŸĞ¾Ñ‡Ğ½Ğ¸ Ğ´Ğ° Ğ¿Ğ¸ÑˆÑƒĞ²Ğ°Ñˆ Ğ·Ğ° Ğ¿Ñ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ...</p>
                </div>

                <div class="form-group">
                    <label data-i18n="label_text">Ğ¢ĞµĞºÑÑ‚ Ğ·Ğ° Ğ•Ñ‚Ğ¸ĞºĞµÑ‚Ğ°</label>
                    <input type="text" id="emoji-label" data-i18n-placeholder="label_placeholder" placeholder="Ğ¿Ñ€. ĞšÑƒÑ‡Ğµ">
                </div>

                <button class="btn-primary" id="emoji-update-btn" data-i18n="update_card">ĞĞ¶ÑƒÑ€Ğ¸Ñ€Ğ°Ñ˜ ĞšĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ°</button>
            </div>

            <!-- TAB: AI -->
            <div id="tab-ai" class="tab-content">
                <div class="form-group">
                    <label data-i18n="image_desc">ĞĞ¿Ğ¸Ñ Ğ½Ğ° Ğ¡Ğ»Ğ¸ĞºĞ°</label>
                    <textarea id="ai-prompt" data-i18n-placeholder="ai_placeholder" placeholder="Ğ¿Ñ€. Ğ¡Ñ€ĞµÑœĞ½Ğ¾ ĞºÑƒÑ‡Ğµ ÑˆÑ‚Ğ¾ ÑĞ¸ Ğ¸Ğ³Ñ€Ğ° ÑĞ¾ Ñ‚Ğ¾Ğ¿ĞºĞ°"></textarea>
                    <small data-i18n="ai_hint">ĞĞ¿Ğ¸ÑˆĞ¸ ÑˆÑ‚Ğ¾ ÑĞ°ĞºĞ°Ñˆ Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ¸Ñˆ (ÑÑ‚Ğ¸Ğ»Ğ¾Ñ‚ Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ÑĞºĞ¸)</small>
                </div>

                <div class="form-group">
                    <label data-i18n="label_text">Ğ¢ĞµĞºÑÑ‚ Ğ·Ğ° Ğ•Ñ‚Ğ¸ĞºĞµÑ‚Ğ°</label>
                    <input type="text" id="ai-label" data-i18n-placeholder="ai_label_placeholder" placeholder="Ğ¿Ñ€. Ğ˜Ğ³Ñ€Ğ°">
                </div>

                <button class="btn-primary" id="ai-generate-btn" data-i18n="generate">Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ°Ñ˜ Ğ¡Ğ»Ğ¸ĞºĞ° âœ¨</button>
                <button class="btn-stop" id="ai-stop-btn" style="display:none;" data-i18n="stop">ğŸ›‘ Ğ¡Ñ‚Ğ¾Ğ¿</button>
            </div>
        </section>

        <!-- DISPLAY SECTION -->
        <section class="display-panel">
            <div id="aac-card" class="aac-card">
                <div class="card-content">
                    <div id="card-visual" class="symbol-display">ğŸ‘‹</div>
                    <div id="card-label" class="large-label">Ğ—Ğ´Ñ€Ğ°Ğ²Ğ¾</div>
                </div>
            </div>

            <div class="color-controls">
                <div class="color-row">
                    <span class="color-label" data-i18n="border">Ğ Ğ°Ğ¼ĞºĞ°:</span>
                    <div class="color-picker" id="border-color-picker">
                        <button class="color-swatch active" data-color="#a8d4ff" style="background:#a8d4ff"></button>
                        <button class="color-swatch" data-color="#000000" style="background:#000"></button>
                        <button class="color-swatch" data-color="#2563eb" style="background:#2563eb"></button>
                        <button class="color-swatch" data-color="#16a34a" style="background:#16a34a"></button>
                        <button class="color-swatch" data-color="#dc2626" style="background:#dc2626"></button>
                        <button class="color-swatch" data-color="#9333ea" style="background:#9333ea"></button>
                        <button class="color-swatch" data-color="#f59e0b" style="background:#f59e0b"></button>
                        <button class="color-swatch" data-color="#ec4899" style="background:#ec4899"></button>
                    </div>
                </div>
                <div class="color-row">
                    <span class="color-label" data-i18n="text">Ğ¢ĞµĞºÑÑ‚:</span>
                    <div class="color-picker" id="font-color-picker">
                        <button class="color-swatch active" data-color="#1a1a2e" style="background:#1a1a2e"></button>
                        <button class="color-swatch" data-color="#000000" style="background:#000"></button>
                        <button class="color-swatch" data-color="#2563eb" style="background:#2563eb"></button>
                        <button class="color-swatch" data-color="#16a34a" style="background:#16a34a"></button>
                        <button class="color-swatch" data-color="#dc2626" style="background:#dc2626"></button>
                        <button class="color-swatch" data-color="#9333ea" style="background:#9333ea"></button>
                        <button class="color-swatch" data-color="#f59e0b" style="background:#f59e0b"></button>
                        <button class="color-swatch" data-color="#ec4899" style="background:#ec4899"></button>
                    </div>
                </div>
                <label class="sync-checkbox">
                    <input type="checkbox" id="sync-colors"> <span data-i18n="sync_colors">Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ°Ñ˜ Ğ±Ğ¾Ğ¸</span>
                </label>
            </div>

            <button id="download-btn" class="btn-secondary" data-i18n="save">Ğ—Ğ°Ñ‡ÑƒĞ²Ğ°Ñ˜ ĞšĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ° ğŸ“¸</button>
        </section>
    </main>

    <div class="credit-watermark">Created by Blagoj Nasev</div>

    <script>
    // ============ LANGUAGE STRINGS ============
    var LANG = {
        mk: {
            title: "ĞšÑ€ĞµĞ¸Ñ€Ğ°Ñ˜ ĞºĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ°",
            subtitle: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ˜ Ğ²Ğ¸Ğ·ÑƒĞµĞ»Ğ½Ğ¸ Ğ¿Ğ¾Ğ¼Ğ°Ğ³Ğ°Ğ»Ğ° Ğ·Ğ° ĞºĞ¾Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ˜Ğ°",
            tab_emoji: "Ğ•Ğ¼Ğ¾ÑŸĞ¸ ĞŸÑ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ",
            tab_ai: "AI Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€",
            search_symbol: "Ğ‘Ğ°Ñ€Ğ°Ñ˜ Ğ¡Ğ¸Ğ¼Ğ±Ğ¾Ğ»",
            search_placeholder: "ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ Ğ·Ğ° Ğ¿Ñ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ (Ğ¿Ñ€. 'happy', 'dog')...",
            search_hint: "ĞŸĞ¾Ñ‡Ğ½Ğ¸ Ğ´Ğ° Ğ¿Ğ¸ÑˆÑƒĞ²Ğ°Ñˆ Ğ·Ğ° Ğ¿Ñ€ĞµĞ±Ğ°Ñ€ÑƒĞ²Ğ°ÑšĞµ...",
            search_min: "ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ Ğ±Ğ°Ñ€ĞµĞ¼ 2 Ğ±ÑƒĞºĞ²Ğ¸...",
            searching: "ğŸ” Ğ‘Ğ°Ñ€Ğ°Ğ¼...",
            no_results: "ĞĞµĞ¼Ğ° Ñ€ĞµĞ·ÑƒĞ»Ñ‚Ğ°Ñ‚Ğ¸",
            label_text: "Ğ¢ĞµĞºÑÑ‚ Ğ·Ğ° Ğ•Ñ‚Ğ¸ĞºĞµÑ‚Ğ°",
            label_placeholder: "Ğ¿Ñ€. ĞšÑƒÑ‡Ğµ",
            update_card: "ĞĞ¶ÑƒÑ€Ğ¸Ñ€Ğ°Ñ˜ ĞšĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ°",
            image_desc: "ĞĞ¿Ğ¸Ñ Ğ½Ğ° Ğ¡Ğ»Ğ¸ĞºĞ°",
            ai_placeholder: "Ğ¿Ñ€. Ğ¡Ñ€ĞµÑœĞ½Ğ¾ ĞºÑƒÑ‡Ğµ ÑˆÑ‚Ğ¾ ÑĞ¸ Ğ¸Ğ³Ñ€Ğ° ÑĞ¾ Ñ‚Ğ¾Ğ¿ĞºĞ°",
            ai_hint: "ĞĞ¿Ğ¸ÑˆĞ¸ ÑˆÑ‚Ğ¾ ÑĞ°ĞºĞ°Ñˆ Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ¸Ñˆ (ÑÑ‚Ğ¸Ğ»Ğ¾Ñ‚ Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ÑĞºĞ¸)",
            ai_label_placeholder: "Ğ¿Ñ€. Ğ˜Ğ³Ñ€Ğ°",
            generate: "Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ°Ñ˜ Ğ¡Ğ»Ğ¸ĞºĞ° âœ¨",
            generating: "â³ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ°Ğ¼...",
            stop: "ğŸ›‘ Ğ¡Ñ‚Ğ¾Ğ¿",
            border: "Ğ Ğ°Ğ¼ĞºĞ°:",
            text: "Ğ¢ĞµĞºÑÑ‚:",
            sync_colors: "Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ°Ñ˜ Ğ±Ğ¾Ğ¸",
            save: "Ğ—Ğ°Ñ‡ÑƒĞ²Ğ°Ñ˜ ĞšĞ°Ñ€Ñ‚Ğ¸Ñ‡ĞºĞ° ğŸ“¸",
            saving: "â³ Ğ—Ğ°Ñ‡ÑƒĞ²ÑƒĞ²Ğ°Ğ¼...",
            alert_enter_desc: "Ğ’Ğ½ĞµÑĞ¸ Ğ¾Ğ¿Ğ¸Ñ Ğ½Ğ° ÑĞ»Ğ¸ĞºĞ°",
            alert_timeout: "Ğ˜ÑÑ‚ĞµÑ‡Ğµ Ğ²Ñ€ĞµĞ¼ĞµÑ‚Ğ¾ - Ğ¾Ğ±Ğ¸Ğ´Ğ¸ ÑĞµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾",
            alert_error: "Ğ“Ñ€ĞµÑˆĞºĞ° - Ğ¾Ğ±Ğ¸Ğ´Ğ¸ ÑĞµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾",
            alert_save_error: "Ğ“Ñ€ĞµÑˆĞºĞ° Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ñ‡ÑƒĞ²ÑƒĞ²Ğ°ÑšĞµ - Ğ¾Ğ±Ğ¸Ğ´Ğ¸ ÑĞµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾"
        },
        en: {
            title: "Create Card",
            subtitle: "Create visual aids for communication",
            tab_emoji: "Emoji Search",
            tab_ai: "AI Generator",
            search_symbol: "Search Symbol",
            search_placeholder: "Type to search (e.g., 'happy', 'dog')...",
            search_hint: "Start typing to search...",
            search_min: "Type at least 2 characters...",
            searching: "ğŸ” Searching...",
            no_results: "No results found",
            label_text: "Label Text",
            label_placeholder: "e.g., Dog",
            update_card: "Update Card",
            image_desc: "Image Description",
            ai_placeholder: "e.g., A happy dog playing with a ball",
            ai_hint: "Describe what you want to see (style is automatic)",
            ai_label_placeholder: "e.g., Play Time",
            generate: "Generate Image âœ¨",
            generating: "â³ Generating...",
            stop: "ğŸ›‘ Stop",
            border: "Border:",
            text: "Text:",
            sync_colors: "Sync colors",
            save: "Save Card ğŸ“¸",
            saving: "â³ Saving...",
            alert_enter_desc: "Please enter an image description",
            alert_timeout: "Timeout - please try again",
            alert_error: "Error - please try again",
            alert_save_error: "Error saving - please try again"
        }
    };

    var currentLang = 'mk';
    var isDarkMode = true;

    // Apply language to all elements
    function applyLanguage(lang) {
        currentLang = lang;
        var strings = LANG[lang];
        
        // Update text content
        document.querySelectorAll('[data-i18n]').forEach(function(el) {
            var key = el.getAttribute('data-i18n');
            if (strings[key]) {
                el.textContent = strings[key];
            }
        });
        
        // Update placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(function(el) {
            var key = el.getAttribute('data-i18n-placeholder');
            if (strings[key]) {
                el.placeholder = strings[key];
            }
        });
        
        // Update language toggle button
        document.getElementById('lang-toggle').textContent = lang === 'mk' ? 'EN' : 'MK';
        
        // Save preference
        localStorage.setItem('aac-lang', lang);
    }

    // Toggle theme
    function toggleTheme() {
        isDarkMode = !isDarkMode;
        document.body.classList.toggle('light-mode', !isDarkMode);
        document.getElementById('theme-toggle').textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
        localStorage.setItem('aac-theme', isDarkMode ? 'dark' : 'light');
    }

    // Load saved preferences
    function loadPreferences() {
        var savedLang = localStorage.getItem('aac-lang');
        var savedTheme = localStorage.getItem('aac-theme');
        
        if (savedLang) {
            applyLanguage(savedLang);
        }
        
        if (savedTheme === 'light') {
            isDarkMode = false;
            document.body.classList.add('light-mode');
            document.getElementById('theme-toggle').textContent = 'ğŸŒ™';
        }
    }

    // Get translated string
    function t(key) {
        return LANG[currentLang][key] || key;
    }

    // ============ BUILT-IN EMOJI DATABASE ============
    var EMOJI_DATA = [
        // Smileys & Emotion
        {e:"ğŸ˜€",n:"happy grinning smile"},
        {e:"ğŸ˜ƒ",n:"happy smile excited"},
        {e:"ğŸ˜„",n:"happy laugh smile"},
        {e:"ğŸ˜",n:"happy grin teeth"},
        {e:"ğŸ˜†",n:"laugh happy squint"},
        {e:"ğŸ˜…",n:"sweat smile nervous"},
        {e:"ğŸ¤£",n:"rofl laugh rolling"},
        {e:"ğŸ˜‚",n:"joy tears laugh cry"},
        {e:"ğŸ™‚",n:"smile slight happy"},
        {e:"ğŸ˜Š",n:"blush smile happy shy"},
        {e:"ğŸ˜‡",n:"angel innocent halo"},
        {e:"ğŸ¥°",n:"love hearts smile"},
        {e:"ğŸ˜",n:"love heart eyes"},
        {e:"ğŸ˜˜",n:"kiss love blow"},
        {e:"ğŸ˜—",n:"kiss whistling"},
        {e:"ğŸ˜š",n:"kiss blush"},
        {e:"ğŸ˜‹",n:"yum delicious tasty food"},
        {e:"ğŸ˜›",n:"tongue playful"},
        {e:"ğŸ˜œ",n:"wink tongue crazy"},
        {e:"ğŸ¤ª",n:"crazy zany wild"},
        {e:"ğŸ˜",n:"tongue squint"},
        {e:"ğŸ¤—",n:"hug hands open"},
        {e:"ğŸ¤”",n:"think hmm wonder"},
        {e:"ğŸ¤«",n:"quiet shush secret"},
        {e:"ğŸ¤­",n:"giggle oops cover"},
        {e:"ğŸ¤",n:"quiet zip mouth"},
        {e:"ğŸ˜",n:"neutral face blank"},
        {e:"ğŸ˜‘",n:"expressionless blank"},
        {e:"ğŸ˜¶",n:"no mouth silent"},
        {e:"ğŸ˜",n:"smirk sly"},
        {e:"ğŸ˜’",n:"unamused annoyed"},
        {e:"ğŸ™„",n:"eye roll annoyed"},
        {e:"ğŸ˜¬",n:"grimace awkward"},
        {e:"ğŸ˜®â€ğŸ’¨",n:"exhale relief sigh"},
        {e:"ğŸ¤¥",n:"lie pinocchio"},
        {e:"ğŸ˜Œ",n:"relieved peaceful calm"},
        {e:"ğŸ˜”",n:"sad pensive down"},
        {e:"ğŸ˜ª",n:"sleepy tired"},
        {e:"ğŸ¤¤",n:"drool hungry"},
        {e:"ğŸ˜´",n:"sleep zzz tired"},
        {e:"ğŸ˜·",n:"sick mask ill"},
        {e:"ğŸ¤’",n:"sick fever ill thermometer"},
        {e:"ğŸ¤•",n:"hurt bandage injured"},
        {e:"ğŸ¤¢",n:"sick nausea green"},
        {e:"ğŸ¤®",n:"vomit throw up sick"},
        {e:"ğŸ¤§",n:"sneeze sick tissue"},
        {e:"ğŸ¥µ",n:"hot warm sweat"},
        {e:"ğŸ¥¶",n:"cold freezing"},
        {e:"ğŸ˜µ",n:"dizzy spiral"},
        {e:"ğŸ¤¯",n:"mind blown explode"},
        {e:"ğŸ¥³",n:"party celebrate birthday"},
        {e:"ğŸ¥¸",n:"disguise glasses"},
        {e:"ğŸ˜",n:"cool sunglasses"},
        {e:"ğŸ¤“",n:"nerd glasses smart"},
        {e:"ğŸ˜•",n:"confused unsure"},
        {e:"ğŸ˜Ÿ",n:"worried nervous"},
        {e:"ğŸ™",n:"sad frown"},
        {e:"â˜¹ï¸",n:"sad frown unhappy"},
        {e:"ğŸ˜®",n:"surprised wow open mouth"},
        {e:"ğŸ˜¯",n:"surprised hushed"},
        {e:"ğŸ˜²",n:"astonished shocked"},
        {e:"ğŸ˜³",n:"flushed embarrassed"},
        {e:"ğŸ¥º",n:"pleading eyes puppy"},
        {e:"ğŸ˜¦",n:"frown open mouth"},
        {e:"ğŸ˜§",n:"anguished"},
        {e:"ğŸ˜¨",n:"fearful scared afraid"},
        {e:"ğŸ˜°",n:"anxious sweat worried"},
        {e:"ğŸ˜¥",n:"sad relieved"},
        {e:"ğŸ˜¢",n:"cry tear sad"},
        {e:"ğŸ˜­",n:"cry sob tears"},
        {e:"ğŸ˜±",n:"scream fear"},
        {e:"ğŸ˜–",n:"confounded"},
        {e:"ğŸ˜£",n:"persevere"},
        {e:"ğŸ˜",n:"disappointed sad"},
        {e:"ğŸ˜“",n:"downcast sweat"},
        {e:"ğŸ˜©",n:"weary tired"},
        {e:"ğŸ˜«",n:"tired exhausted"},
        {e:"ğŸ¥±",n:"yawn tired sleepy"},
        {e:"ğŸ˜¤",n:"triumph huff angry"},
        {e:"ğŸ˜¡",n:"angry mad rage"},
        {e:"ğŸ˜ ",n:"angry"},
        {e:"ğŸ¤¬",n:"curse angry swear"},
        {e:"ğŸ˜ˆ",n:"devil smile evil"},
        {e:"ğŸ‘¿",n:"devil angry evil"},
        {e:"ğŸ’€",n:"skull death dead"},
        {e:"â˜ ï¸",n:"skull crossbones death"},
        {e:"ğŸ’©",n:"poop poo"},
        {e:"ğŸ¤¡",n:"clown"},
        {e:"ğŸ‘¹",n:"ogre monster"},
        {e:"ğŸ‘º",n:"goblin monster"},
        {e:"ğŸ‘»",n:"ghost"},
        {e:"ğŸ‘½",n:"alien"},
        {e:"ğŸ‘¾",n:"alien monster game"},
        {e:"ğŸ¤–",n:"robot"},
        {e:"ğŸ˜º",n:"cat happy smile"},
        {e:"ğŸ˜¸",n:"cat grin smile"},
        {e:"ğŸ˜¹",n:"cat joy tears"},
        {e:"ğŸ˜»",n:"cat heart love"},
        {e:"ğŸ˜¼",n:"cat smirk"},
        {e:"ğŸ˜½",n:"cat kiss"},
        {e:"ğŸ™€",n:"cat weary scared"},
        {e:"ğŸ˜¿",n:"cat cry sad"},
        {e:"ğŸ˜¾",n:"cat angry pout"},
        // Gestures & Body
        {e:"ğŸ‘‹",n:"wave hand hello hi bye"},
        {e:"ğŸ¤š",n:"raised hand stop"},
        {e:"ğŸ–ï¸",n:"hand fingers spread"},
        {e:"âœ‹",n:"hand raised stop"},
        {e:"ğŸ––",n:"vulcan hand"},
        {e:"ğŸ‘Œ",n:"ok okay hand"},
        {e:"ğŸ¤Œ",n:"pinched fingers"},
        {e:"ğŸ¤",n:"pinch small"},
        {e:"âœŒï¸",n:"peace victory hand"},
        {e:"ğŸ¤",n:"fingers crossed luck"},
        {e:"ğŸ¤Ÿ",n:"love you hand"},
        {e:"ğŸ¤˜",n:"rock on hand"},
        {e:"ğŸ¤™",n:"call me hand phone"},
        {e:"ğŸ‘ˆ",n:"point left"},
        {e:"ğŸ‘‰",n:"point right"},
        {e:"ğŸ‘†",n:"point up"},
        {e:"ğŸ–•",n:"middle finger"},
        {e:"ğŸ‘‡",n:"point down"},
        {e:"â˜ï¸",n:"point up one"},
        {e:"ğŸ‘",n:"thumbs up good yes like"},
        {e:"ğŸ‘",n:"thumbs down bad no dislike"},
        {e:"âœŠ",n:"fist raised"},
        {e:"ğŸ‘Š",n:"fist bump punch"},
        {e:"ğŸ¤›",n:"fist left"},
        {e:"ğŸ¤œ",n:"fist right"},
        {e:"ğŸ‘",n:"clap hands applause"},
        {e:"ğŸ™Œ",n:"hands raised celebration"},
        {e:"ğŸ‘",n:"open hands"},
        {e:"ğŸ¤²",n:"palms up"},
        {e:"ğŸ¤",n:"handshake deal"},
        {e:"ğŸ™",n:"pray thanks please"},
        {e:"âœï¸",n:"write hand writing"},
        {e:"ğŸ’…",n:"nail polish"},
        {e:"ğŸ¤³",n:"selfie"},
        {e:"ğŸ’ª",n:"muscle strong flex"},
        {e:"ğŸ¦¾",n:"robot arm"},
        {e:"ğŸ¦¿",n:"robot leg"},
        {e:"ğŸ¦µ",n:"leg"},
        {e:"ğŸ¦¶",n:"foot"},
        {e:"ğŸ‘‚",n:"ear listen hear"},
        {e:"ğŸ¦»",n:"ear hearing aid"},
        {e:"ğŸ‘ƒ",n:"nose smell"},
        {e:"ğŸ§ ",n:"brain think"},
        {e:"ğŸ«€",n:"heart organ"},
        {e:"ğŸ«",n:"lungs breathe"},
        {e:"ğŸ¦·",n:"tooth teeth"},
        {e:"ğŸ¦´",n:"bone"},
        {e:"ğŸ‘€",n:"eyes look see"},
        {e:"ğŸ‘ï¸",n:"eye"},
        {e:"ğŸ‘…",n:"tongue taste"},
        {e:"ğŸ‘„",n:"mouth lips"},
        // People
        {e:"ğŸ‘¶",n:"baby infant"},
        {e:"ğŸ§’",n:"child kid"},
        {e:"ğŸ‘¦",n:"boy"},
        {e:"ğŸ‘§",n:"girl"},
        {e:"ğŸ§‘",n:"person adult"},
        {e:"ğŸ‘±",n:"blonde person"},
        {e:"ğŸ‘¨",n:"man"},
        {e:"ğŸ§”",n:"beard man"},
        {e:"ğŸ‘©",n:"woman"},
        {e:"ğŸ§“",n:"older person elderly"},
        {e:"ğŸ‘´",n:"old man grandfather grandpa"},
        {e:"ğŸ‘µ",n:"old woman grandmother grandma"},
        {e:"ğŸ‘®",n:"police officer cop"},
        {e:"ğŸ‘·",n:"construction worker"},
        {e:"ğŸ’‚",n:"guard"},
        {e:"ğŸ•µï¸",n:"detective spy"},
        {e:"ğŸ‘©â€âš•ï¸",n:"doctor health nurse"},
        {e:"ğŸ‘¨â€âš•ï¸",n:"doctor man health"},
        {e:"ğŸ‘©â€ğŸŒ¾",n:"farmer woman"},
        {e:"ğŸ‘¨â€ğŸŒ¾",n:"farmer man"},
        {e:"ğŸ‘©â€ğŸ³",n:"cook chef woman"},
        {e:"ğŸ‘¨â€ğŸ³",n:"cook chef man"},
        {e:"ğŸ‘©â€ğŸ“",n:"student graduate woman"},
        {e:"ğŸ‘¨â€ğŸ“",n:"student graduate man"},
        {e:"ğŸ‘©â€ğŸ«",n:"teacher woman"},
        {e:"ğŸ‘¨â€ğŸ«",n:"teacher man"},
        {e:"ğŸ‘©â€ğŸ’»",n:"technologist woman computer"},
        {e:"ğŸ‘¨â€ğŸ’»",n:"technologist man computer"},
        {e:"ğŸ§‘â€ğŸ¦¯",n:"blind person cane"},
        {e:"ğŸ§‘â€ğŸ¦¼",n:"wheelchair motorized"},
        {e:"ğŸ§‘â€ğŸ¦½",n:"wheelchair manual"},
        {e:"ğŸš¶",n:"walk person walking"},
        {e:"ğŸ§",n:"stand person standing"},
        {e:"ğŸ§",n:"kneel person kneeling"},
        {e:"ğŸƒ",n:"run person running"},
        {e:"ğŸ’ƒ",n:"dance woman dancing"},
        {e:"ğŸ•º",n:"dance man dancing"},
        {e:"ğŸ‘¯",n:"dance bunny ears"},
        {e:"ğŸ§–",n:"sauna steam person"},
        {e:"ğŸ§—",n:"climb climbing person"},
        {e:"ğŸ¤º",n:"fencing"},
        {e:"ğŸ‡",n:"horse racing"},
        {e:"â›·ï¸",n:"ski skiing"},
        {e:"ğŸ‚",n:"snowboard"},
        {e:"ğŸ‹ï¸",n:"weight lift gym"},
        {e:"ğŸ¤¼",n:"wrestle wrestling"},
        {e:"ğŸ¤¸",n:"cartwheel gymnastics"},
        {e:"â›¹ï¸",n:"basketball ball"},
        {e:"ğŸ¤¾",n:"handball"},
        {e:"ğŸŒï¸",n:"golf"},
        {e:"ğŸ„",n:"surf surfing"},
        {e:"ğŸŠ",n:"swim swimming"},
        {e:"ğŸ¤½",n:"water polo"},
        {e:"ğŸš£",n:"row boat rowing"},
        {e:"ğŸ§˜",n:"yoga meditation"},
        {e:"ğŸ›€",n:"bath bathtub"},
        {e:"ğŸ›Œ",n:"sleep bed"},
        {e:"ğŸ‘­",n:"women holding hands"},
        {e:"ğŸ‘«",n:"couple man woman"},
        {e:"ğŸ‘¬",n:"men holding hands"},
        {e:"ğŸ’",n:"kiss couple"},
        {e:"ğŸ’‘",n:"couple heart love"},
        {e:"ğŸ‘ª",n:"family"},
        // Animals
        {e:"ğŸ¶",n:"dog face puppy"},
        {e:"ğŸ•",n:"dog"},
        {e:"ğŸ¦®",n:"guide dog"},
        {e:"ğŸ•â€ğŸ¦º",n:"service dog"},
        {e:"ğŸ©",n:"poodle dog"},
        {e:"ğŸº",n:"wolf"},
        {e:"ğŸ¦Š",n:"fox"},
        {e:"ğŸ¦",n:"raccoon"},
        {e:"ğŸ±",n:"cat face kitten"},
        {e:"ğŸˆ",n:"cat"},
        {e:"ğŸˆâ€â¬›",n:"black cat"},
        {e:"ğŸ¦",n:"lion"},
        {e:"ğŸ¯",n:"tiger face"},
        {e:"ğŸ…",n:"tiger"},
        {e:"ğŸ†",n:"leopard"},
        {e:"ğŸ´",n:"horse face"},
        {e:"ğŸ",n:"horse racing"},
        {e:"ğŸ¦„",n:"unicorn"},
        {e:"ğŸ¦“",n:"zebra"},
        {e:"ğŸ¦Œ",n:"deer"},
        {e:"ğŸ¦¬",n:"bison"},
        {e:"ğŸ®",n:"cow face"},
        {e:"ğŸ‚",n:"ox"},
        {e:"ğŸƒ",n:"water buffalo"},
        {e:"ğŸ„",n:"cow"},
        {e:"ğŸ·",n:"pig face"},
        {e:"ğŸ–",n:"pig"},
        {e:"ğŸ—",n:"boar"},
        {e:"ğŸ½",n:"pig nose"},
        {e:"ğŸ",n:"ram sheep"},
        {e:"ğŸ‘",n:"sheep ewe"},
        {e:"ğŸ",n:"goat"},
        {e:"ğŸª",n:"camel one hump"},
        {e:"ğŸ«",n:"camel two humps"},
        {e:"ğŸ¦™",n:"llama"},
        {e:"ğŸ¦’",n:"giraffe"},
        {e:"ğŸ˜",n:"elephant"},
        {e:"ğŸ¦£",n:"mammoth"},
        {e:"ğŸ¦",n:"rhinoceros rhino"},
        {e:"ğŸ¦›",n:"hippopotamus hippo"},
        {e:"ğŸ­",n:"mouse face"},
        {e:"ğŸ",n:"mouse"},
        {e:"ğŸ€",n:"rat"},
        {e:"ğŸ¹",n:"hamster"},
        {e:"ğŸ°",n:"rabbit bunny face"},
        {e:"ğŸ‡",n:"rabbit bunny"},
        {e:"ğŸ¿ï¸",n:"chipmunk squirrel"},
        {e:"ğŸ¦«",n:"beaver"},
        {e:"ğŸ¦”",n:"hedgehog"},
        {e:"ğŸ¦‡",n:"bat"},
        {e:"ğŸ»",n:"bear"},
        {e:"ğŸ»â€â„ï¸",n:"polar bear"},
        {e:"ğŸ¨",n:"koala"},
        {e:"ğŸ¼",n:"panda"},
        {e:"ğŸ¦¥",n:"sloth"},
        {e:"ğŸ¦¦",n:"otter"},
        {e:"ğŸ¦¨",n:"skunk"},
        {e:"ğŸ¦˜",n:"kangaroo"},
        {e:"ğŸ¦¡",n:"badger"},
        {e:"ğŸ¾",n:"paw prints"},
        {e:"ğŸ¦ƒ",n:"turkey"},
        {e:"ğŸ”",n:"chicken"},
        {e:"ğŸ“",n:"rooster"},
        {e:"ğŸ£",n:"hatching chick"},
        {e:"ğŸ¤",n:"baby chick"},
        {e:"ğŸ¥",n:"chick front"},
        {e:"ğŸ¦",n:"bird"},
        {e:"ğŸ§",n:"penguin"},
        {e:"ğŸ•Šï¸",n:"dove peace"},
        {e:"ğŸ¦…",n:"eagle"},
        {e:"ğŸ¦†",n:"duck"},
        {e:"ğŸ¦¢",n:"swan"},
        {e:"ğŸ¦‰",n:"owl"},
        {e:"ğŸ¦¤",n:"dodo"},
        {e:"ğŸª¶",n:"feather"},
        {e:"ğŸ¦©",n:"flamingo"},
        {e:"ğŸ¦š",n:"peacock"},
        {e:"ğŸ¦œ",n:"parrot"},
        {e:"ğŸ¸",n:"frog"},
        {e:"ğŸŠ",n:"crocodile"},
        {e:"ğŸ¢",n:"turtle"},
        {e:"ğŸ¦",n:"lizard"},
        {e:"ğŸ",n:"snake"},
        {e:"ğŸ²",n:"dragon face"},
        {e:"ğŸ‰",n:"dragon"},
        {e:"ğŸ¦•",n:"dinosaur sauropod"},
        {e:"ğŸ¦–",n:"dinosaur t-rex"},
        {e:"ğŸ³",n:"whale spouting"},
        {e:"ğŸ‹",n:"whale"},
        {e:"ğŸ¬",n:"dolphin"},
        {e:"ğŸ¦­",n:"seal"},
        {e:"ğŸŸ",n:"fish"},
        {e:"ğŸ ",n:"tropical fish"},
        {e:"ğŸ¡",n:"blowfish"},
        {e:"ğŸ¦ˆ",n:"shark"},
        {e:"ğŸ™",n:"octopus"},
        {e:"ğŸš",n:"shell"},
        {e:"ğŸŒ",n:"snail"},
        {e:"ğŸ¦‹",n:"butterfly"},
        {e:"ğŸ›",n:"bug caterpillar"},
        {e:"ğŸœ",n:"ant"},
        {e:"ğŸ",n:"bee honeybee"},
        {e:"ğŸª²",n:"beetle"},
        {e:"ğŸ",n:"ladybug ladybird"},
        {e:"ğŸ¦—",n:"cricket"},
        {e:"ğŸª³",n:"cockroach"},
        {e:"ğŸ•·ï¸",n:"spider"},
        {e:"ğŸ•¸ï¸",n:"spider web"},
        {e:"ğŸ¦‚",n:"scorpion"},
        {e:"ğŸ¦Ÿ",n:"mosquito"},
        {e:"ğŸª°",n:"fly"},
        {e:"ğŸª±",n:"worm"},
        {e:"ğŸ¦ ",n:"microbe germ bacteria virus"},
        // Food & Drink
        {e:"ğŸ‡",n:"grapes"},
        {e:"ğŸˆ",n:"melon"},
        {e:"ğŸ‰",n:"watermelon"},
        {e:"ğŸŠ",n:"orange tangerine"},
        {e:"ğŸ‹",n:"lemon"},
        {e:"ğŸŒ",n:"banana"},
        {e:"ğŸ",n:"pineapple"},
        {e:"ğŸ¥­",n:"mango"},
        {e:"ğŸ",n:"apple red"},
        {e:"ğŸ",n:"apple green"},
        {e:"ğŸ",n:"pear"},
        {e:"ğŸ‘",n:"peach"},
        {e:"ğŸ’",n:"cherries cherry"},
        {e:"ğŸ“",n:"strawberry"},
        {e:"ğŸ«",n:"blueberries"},
        {e:"ğŸ¥",n:"kiwi fruit"},
        {e:"ğŸ…",n:"tomato"},
        {e:"ğŸ«’",n:"olive"},
        {e:"ğŸ¥¥",n:"coconut"},
        {e:"ğŸ¥‘",n:"avocado"},
        {e:"ğŸ†",n:"eggplant"},
        {e:"ğŸ¥”",n:"potato"},
        {e:"ğŸ¥•",n:"carrot"},
        {e:"ğŸŒ½",n:"corn"},
        {e:"ğŸŒ¶ï¸",n:"hot pepper chili"},
        {e:"ğŸ«‘",n:"bell pepper"},
        {e:"ğŸ¥’",n:"cucumber"},
        {e:"ğŸ¥¬",n:"leafy green"},
        {e:"ğŸ¥¦",n:"broccoli"},
        {e:"ğŸ§„",n:"garlic"},
        {e:"ğŸ§…",n:"onion"},
        {e:"ğŸ„",n:"mushroom"},
        {e:"ğŸ¥œ",n:"peanuts"},
        {e:"ğŸŒ°",n:"chestnut"},
        {e:"ğŸ",n:"bread"},
        {e:"ğŸ¥",n:"croissant"},
        {e:"ğŸ¥–",n:"baguette bread"},
        {e:"ğŸ«“",n:"flatbread"},
        {e:"ğŸ¥¨",n:"pretzel"},
        {e:"ğŸ¥¯",n:"bagel"},
        {e:"ğŸ¥",n:"pancakes"},
        {e:"ğŸ§‡",n:"waffle"},
        {e:"ğŸ§€",n:"cheese"},
        {e:"ğŸ–",n:"meat bone"},
        {e:"ğŸ—",n:"chicken leg poultry"},
        {e:"ğŸ¥©",n:"steak meat"},
        {e:"ğŸ¥“",n:"bacon"},
        {e:"ğŸ”",n:"hamburger burger"},
        {e:"ğŸŸ",n:"fries french fries"},
        {e:"ğŸ•",n:"pizza"},
        {e:"ğŸŒ­",n:"hot dog"},
        {e:"ğŸ¥ª",n:"sandwich"},
        {e:"ğŸŒ®",n:"taco"},
        {e:"ğŸŒ¯",n:"burrito"},
        {e:"ğŸ«”",n:"tamale"},
        {e:"ğŸ¥™",n:"pita"},
        {e:"ğŸ§†",n:"falafel"},
        {e:"ğŸ¥š",n:"egg"},
        {e:"ğŸ³",n:"cooking egg fried"},
        {e:"ğŸ¥˜",n:"pot food"},
        {e:"ğŸ²",n:"pot stew"},
        {e:"ğŸ«•",n:"fondue"},
        {e:"ğŸ¥£",n:"bowl spoon cereal"},
        {e:"ğŸ¥—",n:"salad green"},
        {e:"ğŸ¿",n:"popcorn"},
        {e:"ğŸ§ˆ",n:"butter"},
        {e:"ğŸ§‚",n:"salt"},
        {e:"ğŸ¥«",n:"canned food"},
        {e:"ğŸ±",n:"bento box"},
        {e:"ğŸ˜",n:"rice cracker"},
        {e:"ğŸ™",n:"rice ball"},
        {e:"ğŸš",n:"rice cooked"},
        {e:"ğŸ›",n:"curry rice"},
        {e:"ğŸœ",n:"noodles ramen"},
        {e:"ğŸ",n:"spaghetti pasta"},
        {e:"ğŸ ",n:"sweet potato"},
        {e:"ğŸ¢",n:"oden"},
        {e:"ğŸ£",n:"sushi"},
        {e:"ğŸ¤",n:"shrimp fried"},
        {e:"ğŸ¥",n:"fish cake"},
        {e:"ğŸ¥®",n:"moon cake"},
        {e:"ğŸ¡",n:"dango"},
        {e:"ğŸ¥Ÿ",n:"dumpling"},
        {e:"ğŸ¥ ",n:"fortune cookie"},
        {e:"ğŸ¥¡",n:"takeout box"},
        {e:"ğŸ¦€",n:"crab"},
        {e:"ğŸ¦",n:"lobster"},
        {e:"ğŸ¦",n:"shrimp"},
        {e:"ğŸ¦‘",n:"squid"},
        {e:"ğŸ¦ª",n:"oyster"},
        {e:"ğŸ¦",n:"ice cream soft serve"},
        {e:"ğŸ§",n:"shaved ice"},
        {e:"ğŸ¨",n:"ice cream"},
        {e:"ğŸ©",n:"doughnut donut"},
        {e:"ğŸª",n:"cookie"},
        {e:"ğŸ‚",n:"birthday cake"},
        {e:"ğŸ°",n:"cake slice shortcake"},
        {e:"ğŸ§",n:"cupcake"},
        {e:"ğŸ¥§",n:"pie"},
        {e:"ğŸ«",n:"chocolate bar"},
        {e:"ğŸ¬",n:"candy"},
        {e:"ğŸ­",n:"lollipop"},
        {e:"ğŸ®",n:"custard pudding"},
        {e:"ğŸ¯",n:"honey pot"},
        {e:"ğŸ¼",n:"baby bottle milk"},
        {e:"ğŸ¥›",n:"milk glass"},
        {e:"â˜•",n:"coffee hot"},
        {e:"ğŸ«–",n:"teapot"},
        {e:"ğŸµ",n:"tea cup"},
        {e:"ğŸ¶",n:"sake"},
        {e:"ğŸ¾",n:"champagne bottle"},
        {e:"ğŸ·",n:"wine glass"},
        {e:"ğŸ¸",n:"cocktail glass"},
        {e:"ğŸ¹",n:"tropical drink"},
        {e:"ğŸº",n:"beer mug"},
        {e:"ğŸ»",n:"beer mugs cheers"},
        {e:"ğŸ¥‚",n:"clinking glasses champagne"},
        {e:"ğŸ¥ƒ",n:"whiskey tumbler"},
        {e:"ğŸ¥¤",n:"cup straw"},
        {e:"ğŸ§‹",n:"bubble tea"},
        {e:"ğŸ§ƒ",n:"juice box"},
        {e:"ğŸ§‰",n:"mate"},
        {e:"ğŸ§Š",n:"ice cube"},
        {e:"ğŸ¥¢",n:"chopsticks"},
        {e:"ğŸ½ï¸",n:"plate fork knife"},
        {e:"ğŸ´",n:"fork knife"},
        {e:"ğŸ¥„",n:"spoon"},
        // Activities & Objects
        {e:"âš½",n:"soccer ball football"},
        {e:"ğŸ€",n:"basketball"},
        {e:"ğŸˆ",n:"american football"},
        {e:"âš¾",n:"baseball"},
        {e:"ğŸ¥",n:"softball"},
        {e:"ğŸ¾",n:"tennis"},
        {e:"ğŸ",n:"volleyball"},
        {e:"ğŸ‰",n:"rugby"},
        {e:"ğŸ¥",n:"frisbee disc"},
        {e:"ğŸ±",n:"pool billiard 8ball"},
        {e:"ğŸª€",n:"yo-yo"},
        {e:"ğŸ“",n:"ping pong table tennis"},
        {e:"ğŸ¸",n:"badminton"},
        {e:"ğŸ’",n:"ice hockey"},
        {e:"ğŸ‘",n:"field hockey"},
        {e:"ğŸ¥",n:"lacrosse"},
        {e:"ğŸ",n:"cricket bat"},
        {e:"ğŸªƒ",n:"boomerang"},
        {e:"ğŸ¥…",n:"goal net"},
        {e:"â›³",n:"golf flag"},
        {e:"ğŸª",n:"kite"},
        {e:"ğŸ¹",n:"bow arrow"},
        {e:"ğŸ£",n:"fishing pole"},
        {e:"ğŸ¤¿",n:"diving mask"},
        {e:"ğŸ¥Š",n:"boxing glove"},
        {e:"ğŸ¥‹",n:"martial arts"},
        {e:"ğŸ½",n:"running shirt"},
        {e:"ğŸ›¹",n:"skateboard"},
        {e:"ğŸ›¼",n:"roller skate"},
        {e:"ğŸ›·",n:"sled"},
        {e:"â›¸ï¸",n:"ice skate"},
        {e:"ğŸ¥Œ",n:"curling stone"},
        {e:"ğŸ¿",n:"skis"},
        {e:"â›·ï¸",n:"skier"},
        {e:"ğŸ¯",n:"target dart"},
        {e:"ğŸª€",n:"yo-yo"},
        {e:"ğŸª",n:"kite"},
        {e:"ğŸ®",n:"video game controller"},
        {e:"ğŸ•¹ï¸",n:"joystick game"},
        {e:"ğŸ°",n:"slot machine"},
        {e:"ğŸ²",n:"dice game"},
        {e:"ğŸ§©",n:"puzzle piece"},
        {e:"ğŸ§¸",n:"teddy bear"},
        {e:"ğŸª†",n:"nesting dolls"},
        {e:"â™ ï¸",n:"spade card"},
        {e:"â™¥ï¸",n:"heart card"},
        {e:"â™¦ï¸",n:"diamond card"},
        {e:"â™£ï¸",n:"club card"},
        {e:"â™Ÿï¸",n:"chess pawn"},
        {e:"ğŸƒ",n:"joker card"},
        {e:"ğŸ€„",n:"mahjong"},
        {e:"ğŸ´",n:"flower cards"},
        {e:"ğŸ­",n:"theater masks drama"},
        {e:"ğŸ–¼ï¸",n:"picture frame"},
        {e:"ğŸ¨",n:"art palette paint"},
        {e:"ğŸ§µ",n:"thread"},
        {e:"ğŸª¡",n:"sewing needle"},
        {e:"ğŸ§¶",n:"yarn ball"},
        {e:"ğŸª¢",n:"knot"},
        // Travel & Places
        {e:"ğŸš—",n:"car automobile"},
        {e:"ğŸš•",n:"taxi cab"},
        {e:"ğŸš™",n:"suv car"},
        {e:"ğŸšŒ",n:"bus"},
        {e:"ğŸš",n:"trolleybus"},
        {e:"ğŸï¸",n:"racing car"},
        {e:"ğŸš“",n:"police car"},
        {e:"ğŸš‘",n:"ambulance"},
        {e:"ğŸš’",n:"fire truck engine"},
        {e:"ğŸš",n:"minibus van"},
        {e:"ğŸ›»",n:"pickup truck"},
        {e:"ğŸšš",n:"truck delivery"},
        {e:"ğŸš›",n:"truck semi"},
        {e:"ğŸšœ",n:"tractor"},
        {e:"ğŸï¸",n:"motorcycle"},
        {e:"ğŸ›µ",n:"scooter motor"},
        {e:"ğŸš²",n:"bicycle bike"},
        {e:"ğŸ›´",n:"scooter kick"},
        {e:"ğŸ›º",n:"auto rickshaw"},
        {e:"ğŸš‚",n:"locomotive train"},
        {e:"ğŸšƒ",n:"railway car"},
        {e:"ğŸš„",n:"high speed train"},
        {e:"ğŸš…",n:"bullet train"},
        {e:"ğŸš†",n:"train"},
        {e:"ğŸš‡",n:"metro subway"},
        {e:"ğŸšˆ",n:"light rail"},
        {e:"ğŸš‰",n:"station"},
        {e:"ğŸšŠ",n:"tram"},
        {e:"ğŸš",n:"monorail"},
        {e:"ğŸš",n:"mountain railway"},
        {e:"ğŸš‹",n:"tram car"},
        {e:"ğŸš",n:"bus front"},
        {e:"ğŸš”",n:"police car oncoming"},
        {e:"ğŸš˜",n:"car oncoming"},
        {e:"ğŸš–",n:"taxi oncoming"},
        {e:"ğŸ›",n:"wheel tire"},
        {e:"â›½",n:"fuel pump gas"},
        {e:"ğŸ›£ï¸",n:"highway road"},
        {e:"ğŸ›¤ï¸",n:"railway track"},
        {e:"ğŸ›¢ï¸",n:"oil drum"},
        {e:"âš“",n:"anchor"},
        {e:"â›µ",n:"sailboat"},
        {e:"ğŸ›¶",n:"canoe"},
        {e:"ğŸš¤",n:"speedboat"},
        {e:"ğŸ›³ï¸",n:"passenger ship"},
        {e:"â›´ï¸",n:"ferry"},
        {e:"ğŸ›¥ï¸",n:"motor boat"},
        {e:"ğŸš¢",n:"ship"},
        {e:"âœˆï¸",n:"airplane"},
        {e:"ğŸ›©ï¸",n:"small airplane"},
        {e:"ğŸ›«",n:"airplane departure"},
        {e:"ğŸ›¬",n:"airplane arrival"},
        {e:"ğŸª‚",n:"parachute"},
        {e:"ğŸ’º",n:"seat"},
        {e:"ğŸš",n:"helicopter"},
        {e:"ğŸšŸ",n:"suspension railway"},
        {e:"ğŸš ",n:"cable car mountain"},
        {e:"ğŸš¡",n:"aerial tramway"},
        {e:"ğŸ›°ï¸",n:"satellite"},
        {e:"ğŸš€",n:"rocket"},
        {e:"ğŸ›¸",n:"ufo flying saucer"},
        {e:"ğŸ ",n:"house home"},
        {e:"ğŸ¡",n:"house garden"},
        {e:"ğŸ˜ï¸",n:"houses"},
        {e:"ğŸšï¸",n:"derelict house"},
        {e:"ğŸ¢",n:"office building"},
        {e:"ğŸ£",n:"japanese post office"},
        {e:"ğŸ¤",n:"post office"},
        {e:"ğŸ¥",n:"hospital"},
        {e:"ğŸ¦",n:"bank"},
        {e:"ğŸ¨",n:"hotel"},
        {e:"ğŸ©",n:"love hotel"},
        {e:"ğŸª",n:"convenience store"},
        {e:"ğŸ«",n:"school"},
        {e:"ğŸ¬",n:"department store"},
        {e:"ğŸ­",n:"factory"},
        {e:"ğŸ¯",n:"japanese castle"},
        {e:"ğŸ°",n:"castle"},
        {e:"ğŸ’’",n:"wedding church"},
        {e:"ğŸ—¼",n:"tokyo tower"},
        {e:"ğŸ—½",n:"statue liberty"},
        {e:"â›ª",n:"church"},
        {e:"ğŸ•Œ",n:"mosque"},
        {e:"ğŸ›•",n:"hindu temple"},
        {e:"ğŸ•",n:"synagogue"},
        {e:"â›©ï¸",n:"shinto shrine"},
        {e:"ğŸ•‹",n:"kaaba"},
        {e:"â›²",n:"fountain"},
        {e:"â›º",n:"tent camping"},
        {e:"ğŸŒ",n:"foggy"},
        {e:"ğŸŒƒ",n:"night stars"},
        {e:"ğŸ™ï¸",n:"cityscape"},
        {e:"ğŸŒ„",n:"sunrise mountains"},
        {e:"ğŸŒ…",n:"sunrise"},
        {e:"ğŸŒ†",n:"cityscape dusk"},
        {e:"ğŸŒ‡",n:"sunset"},
        {e:"ğŸŒ‰",n:"bridge night"},
        {e:"ğŸ ",n:"carousel horse"},
        {e:"ğŸ¡",n:"ferris wheel"},
        {e:"ğŸ¢",n:"roller coaster"},
        {e:"ğŸš",n:"bus stop"},
        // Objects
        {e:"âŒš",n:"watch"},
        {e:"ğŸ“±",n:"mobile phone smartphone"},
        {e:"ğŸ“²",n:"phone arrow"},
        {e:"ğŸ’»",n:"laptop computer"},
        {e:"âŒ¨ï¸",n:"keyboard"},
        {e:"ğŸ–¥ï¸",n:"desktop computer"},
        {e:"ğŸ–¨ï¸",n:"printer"},
        {e:"ğŸ–±ï¸",n:"computer mouse"},
        {e:"ğŸ’½",n:"computer disk"},
        {e:"ğŸ’¾",n:"floppy disk save"},
        {e:"ğŸ’¿",n:"optical disk cd"},
        {e:"ğŸ“€",n:"dvd"},
        {e:"ğŸ§®",n:"abacus"},
        {e:"ğŸ¥",n:"movie camera"},
        {e:"ğŸï¸",n:"film frames"},
        {e:"ğŸ“½ï¸",n:"film projector"},
        {e:"ğŸ¬",n:"clapper board movie"},
        {e:"ğŸ“º",n:"television tv"},
        {e:"ğŸ“·",n:"camera"},
        {e:"ğŸ“¸",n:"camera flash"},
        {e:"ğŸ“¹",n:"video camera"},
        {e:"ğŸ“¼",n:"videocassette vhs"},
        {e:"ğŸ”",n:"magnifying glass search"},
        {e:"ğŸ”",n:"magnifying glass right"},
        {e:"ğŸ•¯ï¸",n:"candle"},
        {e:"ğŸ’¡",n:"light bulb idea"},
        {e:"ğŸ”¦",n:"flashlight"},
        {e:"ğŸ®",n:"red paper lantern"},
        {e:"ğŸª”",n:"diya lamp"},
        {e:"ğŸ“”",n:"notebook decorative"},
        {e:"ğŸ“•",n:"closed book"},
        {e:"ğŸ“–",n:"open book"},
        {e:"ğŸ“—",n:"green book"},
        {e:"ğŸ“˜",n:"blue book"},
        {e:"ğŸ“™",n:"orange book"},
        {e:"ğŸ“š",n:"books"},
        {e:"ğŸ““",n:"notebook"},
        {e:"ğŸ“’",n:"ledger"},
        {e:"ğŸ“ƒ",n:"page curl"},
        {e:"ğŸ“œ",n:"scroll"},
        {e:"ğŸ“„",n:"page facing up"},
        {e:"ğŸ“°",n:"newspaper"},
        {e:"ğŸ—ï¸",n:"rolled newspaper"},
        {e:"ğŸ“‘",n:"bookmark tabs"},
        {e:"ğŸ”–",n:"bookmark"},
        {e:"ğŸ·ï¸",n:"label tag"},
        {e:"ğŸ’°",n:"money bag"},
        {e:"ğŸª™",n:"coin"},
        {e:"ğŸ’´",n:"yen"},
        {e:"ğŸ’µ",n:"dollar"},
        {e:"ğŸ’¶",n:"euro"},
        {e:"ğŸ’·",n:"pound"},
        {e:"ğŸ’¸",n:"money wings"},
        {e:"ğŸ’³",n:"credit card"},
        {e:"ğŸ§¾",n:"receipt"},
        {e:"ğŸ’¹",n:"chart"},
        {e:"âœ‰ï¸",n:"envelope email"},
        {e:"ğŸ“§",n:"e-mail"},
        {e:"ğŸ“¨",n:"incoming envelope"},
        {e:"ğŸ“©",n:"envelope arrow"},
        {e:"ğŸ“¤",n:"outbox tray"},
        {e:"ğŸ“¥",n:"inbox tray"},
        {e:"ğŸ“¦",n:"package box"},
        {e:"ğŸ“«",n:"mailbox"},
        {e:"ğŸ“ª",n:"mailbox empty"},
        {e:"ğŸ“¬",n:"mailbox mail"},
        {e:"ğŸ“­",n:"mailbox no mail"},
        {e:"ğŸ“®",n:"postbox"},
        {e:"ğŸ—³ï¸",n:"ballot box"},
        {e:"âœï¸",n:"pencil"},
        {e:"âœ’ï¸",n:"black nib"},
        {e:"ğŸ–‹ï¸",n:"fountain pen"},
        {e:"ğŸ–Šï¸",n:"pen"},
        {e:"ğŸ–Œï¸",n:"paintbrush"},
        {e:"ğŸ–ï¸",n:"crayon"},
        {e:"ğŸ“",n:"memo pencil"},
        {e:"ğŸ’¼",n:"briefcase"},
        {e:"ğŸ“",n:"folder"},
        {e:"ğŸ“‚",n:"open folder"},
        {e:"ğŸ—‚ï¸",n:"card dividers"},
        {e:"ğŸ“…",n:"calendar"},
        {e:"ğŸ“†",n:"tear off calendar"},
        {e:"ğŸ—’ï¸",n:"spiral notepad"},
        {e:"ğŸ—“ï¸",n:"spiral calendar"},
        {e:"ğŸ“‡",n:"card index"},
        {e:"ğŸ“ˆ",n:"chart increasing"},
        {e:"ğŸ“‰",n:"chart decreasing"},
        {e:"ğŸ“Š",n:"bar chart"},
        {e:"ğŸ“‹",n:"clipboard"},
        {e:"ğŸ“Œ",n:"pushpin"},
        {e:"ğŸ“",n:"pin location"},
        {e:"ğŸ“",n:"paperclip"},
        {e:"ğŸ–‡ï¸",n:"linked paperclips"},
        {e:"ğŸ“",n:"ruler straight"},
        {e:"ğŸ“",n:"ruler triangular"},
        {e:"âœ‚ï¸",n:"scissors cut"},
        {e:"ğŸ—ƒï¸",n:"card file box"},
        {e:"ğŸ—„ï¸",n:"file cabinet"},
        {e:"ğŸ—‘ï¸",n:"trash wastebasket"},
        {e:"ğŸ”’",n:"lock locked"},
        {e:"ğŸ”“",n:"unlock open"},
        {e:"ğŸ”",n:"lock pen"},
        {e:"ğŸ”",n:"lock key"},
        {e:"ğŸ”‘",n:"key"},
        {e:"ğŸ—ï¸",n:"old key"},
        {e:"ğŸ”¨",n:"hammer"},
        {e:"ğŸª“",n:"axe"},
        {e:"â›ï¸",n:"pick"},
        {e:"âš’ï¸",n:"hammer pick"},
        {e:"ğŸ› ï¸",n:"hammer wrench tools"},
        {e:"ğŸ—¡ï¸",n:"dagger"},
        {e:"âš”ï¸",n:"crossed swords"},
        {e:"ğŸ”«",n:"water pistol gun"},
        {e:"ğŸªƒ",n:"boomerang"},
        {e:"ğŸ¹",n:"bow arrow"},
        {e:"ğŸ›¡ï¸",n:"shield"},
        {e:"ğŸªš",n:"saw"},
        {e:"ğŸ”§",n:"wrench"},
        {e:"ğŸª›",n:"screwdriver"},
        {e:"ğŸ”©",n:"nut bolt"},
        {e:"âš™ï¸",n:"gear"},
        {e:"ğŸ—œï¸",n:"clamp"},
        {e:"âš–ï¸",n:"balance scale"},
        {e:"ğŸ¦¯",n:"probing cane"},
        {e:"ğŸ”—",n:"link"},
        {e:"â›“ï¸",n:"chains"},
        {e:"ğŸª",n:"hook"},
        {e:"ğŸ§°",n:"toolbox"},
        {e:"ğŸ§²",n:"magnet"},
        {e:"ğŸªœ",n:"ladder"},
        {e:"âš—ï¸",n:"alembic"},
        {e:"ğŸ§ª",n:"test tube"},
        {e:"ğŸ§«",n:"petri dish"},
        {e:"ğŸ§¬",n:"dna"},
        {e:"ğŸ”¬",n:"microscope"},
        {e:"ğŸ”­",n:"telescope"},
        {e:"ğŸ“¡",n:"satellite antenna"},
        {e:"ğŸ’‰",n:"syringe"},
        {e:"ğŸ©¸",n:"blood drop"},
        {e:"ğŸ’Š",n:"pill medicine"},
        {e:"ğŸ©¹",n:"bandage"},
        {e:"ğŸ©¼",n:"crutch"},
        {e:"ğŸ©º",n:"stethoscope"},
        {e:"ğŸšª",n:"door"},
        {e:"ğŸ›—",n:"elevator"},
        {e:"ğŸª",n:"mirror"},
        {e:"ğŸªŸ",n:"window"},
        {e:"ğŸ›ï¸",n:"bed"},
        {e:"ğŸ›‹ï¸",n:"couch sofa"},
        {e:"ğŸª‘",n:"chair"},
        {e:"ğŸš½",n:"toilet"},
        {e:"ğŸª ",n:"plunger"},
        {e:"ğŸš¿",n:"shower"},
        {e:"ğŸ›",n:"bathtub"},
        {e:"ğŸª¤",n:"mouse trap"},
        {e:"ğŸª’",n:"razor"},
        {e:"ğŸ§´",n:"lotion bottle"},
        {e:"ğŸ§·",n:"safety pin"},
        {e:"ğŸ§¹",n:"broom"},
        {e:"ğŸ§º",n:"basket"},
        {e:"ğŸ§»",n:"toilet paper roll"},
        {e:"ğŸª£",n:"bucket"},
        {e:"ğŸ§¼",n:"soap"},
        {e:"ğŸ«§",n:"bubbles"},
        {e:"ğŸª¥",n:"toothbrush"},
        {e:"ğŸ§½",n:"sponge"},
        {e:"ğŸ§¯",n:"fire extinguisher"},
        {e:"ğŸ›’",n:"shopping cart"},
        {e:"ğŸš¬",n:"cigarette smoking"},
        {e:"âš°ï¸",n:"coffin"},
        {e:"ğŸª¦",n:"headstone"},
        {e:"âš±ï¸",n:"funeral urn"},
        {e:"ğŸ—¿",n:"moai statue"},
        {e:"ğŸª§",n:"placard"},
        {e:"ğŸ§",n:"atm sign"},
        // Symbols
        {e:"â¤ï¸",n:"red heart love"},
        {e:"ğŸ§¡",n:"orange heart"},
        {e:"ğŸ’›",n:"yellow heart"},
        {e:"ğŸ’š",n:"green heart"},
        {e:"ğŸ’™",n:"blue heart"},
        {e:"ğŸ’œ",n:"purple heart"},
        {e:"ğŸ–¤",n:"black heart"},
        {e:"ğŸ¤",n:"white heart"},
        {e:"ğŸ¤",n:"brown heart"},
        {e:"ğŸ’”",n:"broken heart"},
        {e:"â¤ï¸â€ğŸ”¥",n:"heart fire"},
        {e:"â¤ï¸â€ğŸ©¹",n:"mending heart"},
        {e:"â£ï¸",n:"heart exclamation"},
        {e:"ğŸ’•",n:"two hearts"},
        {e:"ğŸ’",n:"revolving hearts"},
        {e:"ğŸ’“",n:"beating heart"},
        {e:"ğŸ’—",n:"growing heart"},
        {e:"ğŸ’–",n:"sparkling heart"},
        {e:"ğŸ’˜",n:"heart arrow cupid"},
        {e:"ğŸ’",n:"heart ribbon gift"},
        {e:"ğŸ’Ÿ",n:"heart decoration"},
        {e:"â˜®ï¸",n:"peace symbol"},
        {e:"âœï¸",n:"cross latin"},
        {e:"â˜ªï¸",n:"star crescent"},
        {e:"ğŸ•‰ï¸",n:"om"},
        {e:"â˜¸ï¸",n:"wheel dharma"},
        {e:"âœ¡ï¸",n:"star david"},
        {e:"ğŸ”¯",n:"six pointed star"},
        {e:"ğŸ•",n:"menorah"},
        {e:"â˜¯ï¸",n:"yin yang"},
        {e:"â˜¦ï¸",n:"orthodox cross"},
        {e:"ğŸ›",n:"place worship"},
        {e:"â›",n:"ophiuchus"},
        {e:"â™ˆ",n:"aries"},
        {e:"â™‰",n:"taurus"},
        {e:"â™Š",n:"gemini"},
        {e:"â™‹",n:"cancer"},
        {e:"â™Œ",n:"leo"},
        {e:"â™",n:"virgo"},
        {e:"â™",n:"libra"},
        {e:"â™",n:"scorpio"},
        {e:"â™",n:"sagittarius"},
        {e:"â™‘",n:"capricorn"},
        {e:"â™’",n:"aquarius"},
        {e:"â™“",n:"pisces"},
        {e:"ğŸ†”",n:"id"},
        {e:"âš›ï¸",n:"atom"},
        {e:"ğŸ‰‘",n:"accept"},
        {e:"â˜¢ï¸",n:"radioactive"},
        {e:"â˜£ï¸",n:"biohazard"},
        {e:"ğŸ“´",n:"mobile phone off"},
        {e:"ğŸ“³",n:"vibration mode"},
        {e:"ğŸˆ¶",n:"japanese have"},
        {e:"ğŸˆš",n:"japanese free"},
        {e:"ğŸˆ¸",n:"japanese application"},
        {e:"ğŸˆº",n:"japanese open"},
        {e:"ğŸˆ·ï¸",n:"japanese monthly"},
        {e:"âœ´ï¸",n:"eight pointed star"},
        {e:"ğŸ†š",n:"vs"},
        {e:"ğŸ’®",n:"white flower"},
        {e:"ğŸ‰",n:"japanese bargain"},
        {e:"ãŠ™ï¸",n:"japanese secret"},
        {e:"ãŠ—ï¸",n:"japanese congratulations"},
        {e:"ğŸˆ´",n:"japanese passing"},
        {e:"ğŸˆµ",n:"japanese no vacancy"},
        {e:"ğŸˆ¹",n:"japanese discount"},
        {e:"ğŸˆ²",n:"japanese prohibited"},
        {e:"ğŸ…°ï¸",n:"a blood"},
        {e:"ğŸ…±ï¸",n:"b blood"},
        {e:"ğŸ†",n:"ab blood"},
        {e:"ğŸ†‘",n:"cl"},
        {e:"ğŸ…¾ï¸",n:"o blood"},
        {e:"ğŸ†˜",n:"sos help"},
        {e:"âŒ",n:"cross mark x no"},
        {e:"â­•",n:"circle hollow"},
        {e:"ğŸ›‘",n:"stop sign"},
        {e:"â›”",n:"no entry prohibited"},
        {e:"ğŸ“›",n:"name badge"},
        {e:"ğŸš«",n:"prohibited"},
        {e:"ğŸ’¯",n:"hundred 100"},
        {e:"ğŸ’¢",n:"anger symbol"},
        {e:"â™¨ï¸",n:"hot springs"},
        {e:"ğŸš·",n:"no pedestrians"},
        {e:"ğŸš¯",n:"no littering"},
        {e:"ğŸš³",n:"no bicycles"},
        {e:"ğŸš±",n:"non potable water"},
        {e:"ğŸ”",n:"no one under 18"},
        {e:"ğŸ“µ",n:"no mobile phones"},
        {e:"ğŸš­",n:"no smoking"},
        {e:"â—",n:"exclamation mark"},
        {e:"â•",n:"white exclamation"},
        {e:"â“",n:"question mark"},
        {e:"â”",n:"white question"},
        {e:"â€¼ï¸",n:"double exclamation"},
        {e:"â‰ï¸",n:"exclamation question"},
        {e:"ğŸ”…",n:"dim low brightness"},
        {e:"ğŸ”†",n:"bright high brightness"},
        {e:"ã€½ï¸",n:"part alternation mark"},
        {e:"âš ï¸",n:"warning"},
        {e:"ğŸš¸",n:"children crossing"},
        {e:"ğŸ”±",n:"trident emblem"},
        {e:"âšœï¸",n:"fleur de lis"},
        {e:"ğŸ”°",n:"japanese beginner"},
        {e:"â™»ï¸",n:"recycling symbol"},
        {e:"âœ…",n:"check mark yes"},
        {e:"ğŸˆ¯",n:"japanese reserved"},
        {e:"ğŸ’¹",n:"chart increasing yen"},
        {e:"â‡ï¸",n:"sparkle"},
        {e:"âœ³ï¸",n:"eight spoked asterisk"},
        {e:"â",n:"cross mark button"},
        {e:"ğŸŒ",n:"globe meridians"},
        {e:"ğŸ’ ",n:"diamond dot"},
        {e:"â“‚ï¸",n:"m circled"},
        {e:"ğŸŒ€",n:"cyclone"},
        {e:"ğŸ’¤",n:"zzz sleep"},
        {e:"ğŸ³ï¸",n:"white flag"},
        {e:"ğŸ´",n:"black flag"},
        {e:"ğŸ",n:"checkered flag"},
        {e:"ğŸš©",n:"triangular flag"},
        {e:"ğŸ³ï¸â€ğŸŒˆ",n:"rainbow flag"},
        {e:"ğŸ³ï¸â€âš§ï¸",n:"transgender flag"},
        {e:"ğŸ´â€â˜ ï¸",n:"pirate flag"},
        // Numbers
        {e:"0ï¸âƒ£",n:"zero 0"},
        {e:"1ï¸âƒ£",n:"one 1"},
        {e:"2ï¸âƒ£",n:"two 2"},
        {e:"3ï¸âƒ£",n:"three 3"},
        {e:"4ï¸âƒ£",n:"four 4"},
        {e:"5ï¸âƒ£",n:"five 5"},
        {e:"6ï¸âƒ£",n:"six 6"},
        {e:"7ï¸âƒ£",n:"seven 7"},
        {e:"8ï¸âƒ£",n:"eight 8"},
        {e:"9ï¸âƒ£",n:"nine 9"},
        {e:"ğŸ”Ÿ",n:"ten 10"},
        {e:"#ï¸âƒ£",n:"hash pound"},
        {e:"*ï¸âƒ£",n:"asterisk star"},
        {e:"â–¶ï¸",n:"play button"},
        {e:"â¸ï¸",n:"pause button"},
        {e:"â¯ï¸",n:"play pause"},
        {e:"â¹ï¸",n:"stop button"},
        {e:"âºï¸",n:"record button"},
        {e:"â­ï¸",n:"next track"},
        {e:"â®ï¸",n:"previous track"},
        {e:"â©",n:"fast forward"},
        {e:"âª",n:"rewind"},
        {e:"â«",n:"fast up"},
        {e:"â¬",n:"fast down"},
        {e:"â—€ï¸",n:"reverse button"},
        {e:"ğŸ”¼",n:"up button"},
        {e:"ğŸ”½",n:"down button"},
        {e:"â¡ï¸",n:"right arrow"},
        {e:"â¬…ï¸",n:"left arrow"},
        {e:"â¬†ï¸",n:"up arrow"},
        {e:"â¬‡ï¸",n:"down arrow"},
        {e:"â†—ï¸",n:"up right arrow"},
        {e:"â†˜ï¸",n:"down right arrow"},
        {e:"â†™ï¸",n:"down left arrow"},
        {e:"â†–ï¸",n:"up left arrow"},
        {e:"â†•ï¸",n:"up down arrow"},
        {e:"â†”ï¸",n:"left right arrow"},
        {e:"â†©ï¸",n:"right arrow curving left"},
        {e:"â†ªï¸",n:"left arrow curving right"},
        {e:"â¤´ï¸",n:"right arrow curving up"},
        {e:"â¤µï¸",n:"right arrow curving down"},
        {e:"ğŸ”€",n:"shuffle"},
        {e:"ğŸ”",n:"repeat"},
        {e:"ğŸ”‚",n:"repeat single"},
        {e:"ğŸ”„",n:"counterclockwise arrows"},
        {e:"ğŸ”ƒ",n:"clockwise arrows"},
        {e:"ğŸµ",n:"musical note music"},
        {e:"ğŸ¶",n:"musical notes music"},
        {e:"â•",n:"plus add"},
        {e:"â–",n:"minus"},
        {e:"â—",n:"divide"},
        {e:"âœ–ï¸",n:"multiply x"},
        {e:"â™¾ï¸",n:"infinity"},
        {e:"ğŸ’²",n:"dollar sign"},
        {e:"ğŸ’±",n:"currency exchange"},
        {e:"â„¢ï¸",n:"trade mark"},
        {e:"Â©ï¸",n:"copyright"},
        {e:"Â®ï¸",n:"registered"},
        {e:"ğŸ”š",n:"end arrow"},
        {e:"ğŸ”™",n:"back arrow"},
        {e:"ğŸ”›",n:"on arrow"},
        {e:"ğŸ”",n:"top arrow"},
        {e:"ğŸ”œ",n:"soon arrow"},
        {e:"ã€°ï¸",n:"wavy dash"},
        {e:"â°",n:"curly loop"},
        {e:"â¿",n:"double curly loop"},
        {e:"âœ”ï¸",n:"check mark"},
        {e:"â˜‘ï¸",n:"check box"},
        {e:"ğŸ”˜",n:"radio button"},
        {e:"ğŸ”´",n:"red circle"},
        {e:"ğŸŸ ",n:"orange circle"},
        {e:"ğŸŸ¡",n:"yellow circle"},
        {e:"ğŸŸ¢",n:"green circle"},
        {e:"ğŸ”µ",n:"blue circle"},
        {e:"ğŸŸ£",n:"purple circle"},
        {e:"ğŸŸ¤",n:"brown circle"},
        {e:"âš«",n:"black circle"},
        {e:"âšª",n:"white circle"},
        {e:"ğŸŸ¥",n:"red square"},
        {e:"ğŸŸ§",n:"orange square"},
        {e:"ğŸŸ¨",n:"yellow square"},
        {e:"ğŸŸ©",n:"green square"},
        {e:"ğŸŸ¦",n:"blue square"},
        {e:"ğŸŸª",n:"purple square"},
        {e:"ğŸŸ«",n:"brown square"},
        {e:"â¬›",n:"black square large"},
        {e:"â¬œ",n:"white square large"},
        {e:"â—¼ï¸",n:"black square medium"},
        {e:"â—»ï¸",n:"white square medium"},
        {e:"â—¾",n:"black square medium small"},
        {e:"â—½",n:"white square medium small"},
        {e:"â–ªï¸",n:"black square small"},
        {e:"â–«ï¸",n:"white square small"},
        {e:"ğŸ”¶",n:"large orange diamond"},
        {e:"ğŸ”·",n:"large blue diamond"},
        {e:"ğŸ”¸",n:"small orange diamond"},
        {e:"ğŸ”¹",n:"small blue diamond"},
        {e:"ğŸ”º",n:"red triangle up"},
        {e:"ğŸ”»",n:"red triangle down"},
        {e:"ğŸ’",n:"gem stone diamond"},
        {e:"ğŸ”²",n:"black square button"},
        {e:"ğŸ”³",n:"white square button"},
        {e:"ğŸ”ˆ",n:"speaker low"},
        {e:"ğŸ”‰",n:"speaker medium"},
        {e:"ğŸ”Š",n:"speaker high loud"},
        {e:"ğŸ”‡",n:"muted speaker"},
        {e:"ğŸ“¢",n:"loudspeaker"},
        {e:"ğŸ“£",n:"megaphone"},
        {e:"ğŸ“¯",n:"postal horn"},
        {e:"ğŸ””",n:"bell"},
        {e:"ğŸ”•",n:"bell slash"},
        // Weather & Nature
        {e:"â˜€ï¸",n:"sun sunny"},
        {e:"ğŸŒ¤ï¸",n:"sun small cloud"},
        {e:"â›…",n:"sun behind cloud"},
        {e:"ğŸŒ¥ï¸",n:"sun large cloud"},
        {e:"â˜ï¸",n:"cloud"},
        {e:"ğŸŒ¦ï¸",n:"sun rain cloud"},
        {e:"ğŸŒ§ï¸",n:"rain cloud"},
        {e:"â›ˆï¸",n:"thunder cloud rain"},
        {e:"ğŸŒ©ï¸",n:"lightning cloud"},
        {e:"ğŸŒ¨ï¸",n:"snow cloud"},
        {e:"â„ï¸",n:"snowflake"},
        {e:"â˜ƒï¸",n:"snowman"},
        {e:"â›„",n:"snowman no snow"},
        {e:"ğŸŒ¬ï¸",n:"wind face"},
        {e:"ğŸ’¨",n:"dash wind"},
        {e:"ğŸŒªï¸",n:"tornado"},
        {e:"ğŸŒ«ï¸",n:"fog"},
        {e:"ğŸŒŠ",n:"wave water ocean"},
        {e:"ğŸ’§",n:"droplet water"},
        {e:"ğŸ’¦",n:"sweat droplets water"},
        {e:"ğŸŒˆ",n:"rainbow"},
        {e:"ğŸŒ™",n:"crescent moon"},
        {e:"ğŸŒ›",n:"first quarter moon face"},
        {e:"ğŸŒœ",n:"last quarter moon face"},
        {e:"ğŸŒ",n:"full moon face"},
        {e:"ğŸŒ",n:"sun face"},
        {e:"â­",n:"star"},
        {e:"ğŸŒŸ",n:"glowing star"},
        {e:"âœ¨",n:"sparkles"},
        {e:"ğŸŒ ",n:"shooting star"},
        {e:"ğŸ”¥",n:"fire flame hot"},
        {e:"ğŸ’¥",n:"collision explosion"},
        {e:"âš¡",n:"lightning high voltage"},
        {e:"ğŸŒ¸",n:"cherry blossom flower"},
        {e:"ğŸ’®",n:"white flower"},
        {e:"ğŸµï¸",n:"rosette"},
        {e:"ğŸŒ¹",n:"rose flower"},
        {e:"ğŸ¥€",n:"wilted flower"},
        {e:"ğŸŒº",n:"hibiscus flower"},
        {e:"ğŸŒ»",n:"sunflower"},
        {e:"ğŸŒ¼",n:"blossom flower"},
        {e:"ğŸŒ·",n:"tulip flower"},
        {e:"ğŸŒ±",n:"seedling plant"},
        {e:"ğŸª´",n:"potted plant"},
        {e:"ğŸŒ²",n:"evergreen tree"},
        {e:"ğŸŒ³",n:"deciduous tree"},
        {e:"ğŸŒ´",n:"palm tree"},
        {e:"ğŸŒµ",n:"cactus"},
        {e:"ğŸŒ¾",n:"sheaf rice"},
        {e:"ğŸŒ¿",n:"herb"},
        {e:"â˜˜ï¸",n:"shamrock"},
        {e:"ğŸ€",n:"four leaf clover luck"},
        {e:"ğŸ",n:"maple leaf fall"},
        {e:"ğŸ‚",n:"fallen leaf autumn"},
        {e:"ğŸƒ",n:"leaf fluttering wind"},
        {e:"ğŸª¹",n:"empty nest"},
        {e:"ğŸªº",n:"nest eggs"},
        {e:"ğŸ„",n:"mushroom"},
        {e:"ğŸŒ",n:"globe europe africa earth"},
        {e:"ğŸŒ",n:"globe americas earth"},
        {e:"ğŸŒ",n:"globe asia australia earth"},
        {e:"ğŸª¨",n:"rock"},
        {e:"ğŸªµ",n:"wood log"},
        // Clothing
        {e:"ğŸ‘“",n:"glasses"},
        {e:"ğŸ•¶ï¸",n:"sunglasses"},
        {e:"ğŸ¥½",n:"goggles"},
        {e:"ğŸ¥¼",n:"lab coat"},
        {e:"ğŸ¦º",n:"safety vest"},
        {e:"ğŸ‘”",n:"necktie"},
        {e:"ğŸ‘•",n:"t-shirt"},
        {e:"ğŸ‘–",n:"jeans pants"},
        {e:"ğŸ§£",n:"scarf"},
        {e:"ğŸ§¤",n:"gloves"},
        {e:"ğŸ§¥",n:"coat"},
        {e:"ğŸ§¦",n:"socks"},
        {e:"ğŸ‘—",n:"dress"},
        {e:"ğŸ‘˜",n:"kimono"},
        {e:"ğŸ¥»",n:"sari"},
        {e:"ğŸ©±",n:"one piece swimsuit"},
        {e:"ğŸ©²",n:"briefs"},
        {e:"ğŸ©³",n:"shorts"},
        {e:"ğŸ‘™",n:"bikini"},
        {e:"ğŸ‘š",n:"woman clothes"},
        {e:"ğŸ‘›",n:"purse"},
        {e:"ğŸ‘œ",n:"handbag"},
        {e:"ğŸ‘",n:"clutch bag"},
        {e:"ğŸ›ï¸",n:"shopping bags"},
        {e:"ğŸ’",n:"backpack school bag"},
        {e:"ğŸ©´",n:"thong sandal"},
        {e:"ğŸ‘",n:"man shoe"},
        {e:"ğŸ‘Ÿ",n:"running shoe sneaker"},
        {e:"ğŸ¥¾",n:"hiking boot"},
        {e:"ğŸ¥¿",n:"flat shoe"},
        {e:"ğŸ‘ ",n:"high heel shoe"},
        {e:"ğŸ‘¡",n:"woman sandal"},
        {e:"ğŸ©°",n:"ballet shoes"},
        {e:"ğŸ‘¢",n:"woman boot"},
        {e:"ğŸ‘‘",n:"crown"},
        {e:"ğŸ‘’",n:"woman hat"},
        {e:"ğŸ©",n:"top hat"},
        {e:"ğŸ“",n:"graduation cap"},
        {e:"ğŸ§¢",n:"cap billed"},
        {e:"ğŸª–",n:"military helmet"},
        {e:"â›‘ï¸",n:"rescue helmet"},
        {e:"ğŸ“¿",n:"prayer beads"},
        {e:"ğŸ’„",n:"lipstick"},
        {e:"ğŸ’",n:"ring"},
        {e:"ğŸ’",n:"gem stone diamond"},
        {e:"ğŸ€",n:"ribbon bow"},
        {e:"ğŸ",n:"gift wrapped present"}
    ];

    document.addEventListener('DOMContentLoaded', function() {
        // Load saved preferences first
        loadPreferences();
        
        // Theme toggle
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
        
        // Language toggle
        document.getElementById('lang-toggle').addEventListener('click', function() {
            applyLanguage(currentLang === 'mk' ? 'en' : 'mk');
        });
        
        // Elements
        var tabBtns = document.querySelectorAll('.tab-btn');
        var emojiSearch = document.getElementById('emoji-search');
        var emojiGrid = document.getElementById('emoji-grid');
        var emojiLabel = document.getElementById('emoji-label');
        var emojiUpdateBtn = document.getElementById('emoji-update-btn');
        var aiPrompt = document.getElementById('ai-prompt');
        var aiLabel = document.getElementById('ai-label');
        var aiGenerateBtn = document.getElementById('ai-generate-btn');
        var aiStopBtn = document.getElementById('ai-stop-btn');
        var cardVisual = document.getElementById('card-visual');
        var cardLabel = document.getElementById('card-label');
        var aacCard = document.getElementById('aac-card');
        var downloadBtn = document.getElementById('download-btn');

        var selectedEmoji = 'ğŸ‘‹';
        var isGenerating = false;
        var timerInterval = null;

        // Style for AI images
        var STYLE_PROMPT = ", simple flat vector illustration, solid white background, cute cartoon style, bold black outline, bright colors, single centered object, emoji style, clipart, child-friendly, no shadows, no gradients";

        // Auto-resize label text to fit
        function autoResizeLabel() {
            var label = cardLabel;
            var text = label.textContent;
            var len = text.length;
            
            // Calculate font size based on text length
            var fontSize;
            if (len <= 6) {
                fontSize = 3; // rem
            } else if (len <= 10) {
                fontSize = 2.5;
            } else if (len <= 15) {
                fontSize = 2;
            } else if (len <= 20) {
                fontSize = 1.6;
            } else {
                fontSize = 1.3;
            }
            
            label.style.fontSize = fontSize + 'rem';
        }

        // Update label with auto-resize
        function setLabel(text) {
            cardLabel.textContent = text || 'Label';
            autoResizeLabel();
        }

        // Tab switching
        tabBtns.forEach(function(btn) {
            btn.addEventListener('click', function() {
                tabBtns.forEach(function(b) { b.classList.remove('active'); });
                document.querySelectorAll('.tab-content').forEach(function(c) { c.classList.remove('active'); });
                btn.classList.add('active');
                document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
            });
        });

        // Border Color Picker
        var borderColorPicker = document.getElementById('border-color-picker');
        var fontColorPicker = document.getElementById('font-color-picker');
        var syncColors = document.getElementById('sync-colors');

        borderColorPicker.addEventListener('click', function(e) {
            if (e.target.classList.contains('color-swatch')) {
                borderColorPicker.querySelectorAll('.color-swatch').forEach(function(s) {
                    s.classList.remove('active');
                });
                e.target.classList.add('active');
                var color = e.target.dataset.color;
                aacCard.style.borderColor = color;
                
                // Sync if checkbox checked
                if (syncColors.checked) {
                    fontColorPicker.querySelectorAll('.color-swatch').forEach(function(s) {
                        s.classList.remove('active');
                        if (s.dataset.color === color) s.classList.add('active');
                    });
                    cardLabel.style.color = color;
                }
            }
        });

        fontColorPicker.addEventListener('click', function(e) {
            if (e.target.classList.contains('color-swatch')) {
                fontColorPicker.querySelectorAll('.color-swatch').forEach(function(s) {
                    s.classList.remove('active');
                });
                e.target.classList.add('active');
                var color = e.target.dataset.color;
                cardLabel.style.color = color;
                
                // Sync if checkbox checked
                if (syncColors.checked) {
                    borderColorPicker.querySelectorAll('.color-swatch').forEach(function(s) {
                        s.classList.remove('active');
                        if (s.dataset.color === color) s.classList.add('active');
                    });
                    aacCard.style.borderColor = color;
                }
            }
        });

        // Emoji Search (LOCAL - no API needed)
        emojiSearch.addEventListener('input', function() {
            var query = emojiSearch.value.trim().toLowerCase();
            
            if (query.length < 2) {
                emojiGrid.innerHTML = '<p class="emoji-message">' + t('search_min') + '</p>';
                return;
            }

            emojiGrid.innerHTML = '<p class="emoji-message">' + t('searching') + '</p>';

            // Search in local database
            var results = EMOJI_DATA.filter(function(item) {
                return item.n.toLowerCase().indexOf(query) !== -1;
            });

            emojiGrid.innerHTML = '';

            if (results.length > 0) {
                results.slice(0, 25).forEach(function(item) {
                    var btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'emoji-item';
                    btn.textContent = item.e;
                    btn.title = item.n;
                    
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.emoji-item').forEach(function(i) {
                            i.classList.remove('selected');
                        });
                        btn.classList.add('selected');
                        selectedEmoji = item.e;
                        emojiLabel.value = item.n.split(' ')[0];
                        
                        // Update card immediately
                        cardVisual.className = 'symbol-display';
                        cardVisual.textContent = item.e;
                        setLabel(emojiLabel.value);
                    });
                    
                    emojiGrid.appendChild(btn);
                });
            } else {
                emojiGrid.innerHTML = '<p class="emoji-message">' + t('no_results') + '</p>';
            }
        });

        // Emoji Update Button
        emojiUpdateBtn.addEventListener('click', function() {
            cardVisual.className = 'symbol-display';
            cardVisual.textContent = selectedEmoji;
            setLabel(emojiLabel.value);
        });

        // AI Generation
        aiGenerateBtn.addEventListener('click', function() {
            var prompt = aiPrompt.value.trim();
            var label = aiLabel.value.trim() || prompt.split(',')[0] || 'label';

            if (!prompt) {
                alert(t('alert_enter_desc'));
                return;
            }

            isGenerating = true;
            aiGenerateBtn.disabled = true;
            aiGenerateBtn.textContent = t('generating');
            aiStopBtn.style.display = 'block';

            // Show loading
            var seconds = 0;
            cardVisual.className = 'image-display';
            cardVisual.innerHTML = '<div class="loading-info"><div class="spinner"></div><div class="timer" id="timer">0s</div></div>';
            setLabel(label);

            timerInterval = setInterval(function() {
                seconds++;
                var timer = document.getElementById('timer');
                if (timer) timer.textContent = seconds + 's';
            }, 1000);

            // Generate with Pollinations
            var seed = Math.floor(Math.random() * 100000);
            var fullPrompt = prompt + STYLE_PROMPT;
            var imageUrl = 'https://image.pollinations.ai/prompt/' + encodeURIComponent(fullPrompt) + '?width=512&height=512&nologo=true&seed=' + seed;

            var img = new Image();
            img.crossOrigin = 'Anonymous';

            var timeout = setTimeout(function() {
                if (isGenerating) {
                    stopGeneration();
                    cardVisual.innerHTML = '<span class="placeholder-icon">âŒ</span>';
                    alert(t('alert_timeout'));
                }
            }, 60000);

            img.onload = function() {
                clearTimeout(timeout);
                clearInterval(timerInterval);
                if (!isGenerating) return;

                cardVisual.innerHTML = '';
                img.style.maxWidth = '100%';
                img.style.maxHeight = '100%';
                cardVisual.appendChild(img);

                isGenerating = false;
                aiGenerateBtn.disabled = false;
                aiGenerateBtn.textContent = t('generate');
                aiStopBtn.style.display = 'none';
            };

            img.onerror = function() {
                clearTimeout(timeout);
                clearInterval(timerInterval);
                if (!isGenerating) return;

                cardVisual.innerHTML = '<span class="placeholder-icon">âŒ</span>';
                isGenerating = false;
                aiGenerateBtn.disabled = false;
                aiGenerateBtn.textContent = t('generate');
                aiStopBtn.style.display = 'none';
                alert(t('alert_error'));
            };

            img.src = imageUrl;
        });

        function stopGeneration() {
            isGenerating = false;
            clearInterval(timerInterval);
            aiGenerateBtn.disabled = false;
            aiGenerateBtn.textContent = t('generate');
            aiStopBtn.style.display = 'none';
        }

        aiStopBtn.addEventListener('click', function() {
            stopGeneration();
            cardVisual.className = 'symbol-display';
            cardVisual.textContent = 'ğŸ¨';
        });

        // Download
        downloadBtn.addEventListener('click', function() {
            var originalText = downloadBtn.textContent;
            downloadBtn.textContent = t('saving');
            downloadBtn.disabled = true;

            html2canvas(aacCard, {
                scale: 3,
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#ffffff'
            }).then(function(canvas) {
                var link = document.createElement('a');
                var filename = cardLabel.textContent.replace(/[^a-zA-ZĞ°-ÑĞ-Ğ¯Ğ°-ÑˆĞ-Ğ¨0-9]/g, '_') || 'symbol';
                link.download = 'aac_' + filename + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();

                downloadBtn.textContent = t('save');
                downloadBtn.disabled = false;
            }).catch(function(err) {
                console.error('Save error:', err);
                alert(t('alert_save_error'));
                downloadBtn.textContent = t('save');
                downloadBtn.disabled = false;
            });
        });

        // Initialize
        autoResizeLabel();
    });
    </script>
    <script src="home-button.js"></script>
</body>
</html>
